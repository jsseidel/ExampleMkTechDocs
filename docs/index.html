<!--
 Copyright (c) 2017 AT&T Intellectual Property. All rights reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<html>
<head>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<link rel="stylesheet" href="mktechdocs.css"/>
</head>
<body>
<div id="wrapper">
<div id="header">
<p>&nbsp;</p>
<h1 style="font-size: 300%; margin-bottom: 0;">Getting Started with MkTechDocs</h1>
<p style="font-size: 80%">Get up and running quickly</p>

</div><!-- header -->
<div id="navbar">
<div id="TOC">
<ul>
<li><a href="#what-is-a-master-file"><span class="toc-section-number">1</span> What is a master file?</a></li>
<li><a href="#include-blocks"><span class="toc-section-number">2</span> Include blocks</a><ul>
<li><a href="#this-heading-is-from-the-include-file"><span class="toc-section-number">2.1</span> This heading is from the include file</a></li>
</ul></li>
<li><a href="#images"><span class="toc-section-number">3</span> Images</a></li>
<li><a href="#diagrams"><span class="toc-section-number">4</span> Diagrams</a></li>
<li><a href="#templates"><span class="toc-section-number">5</span> Templates</a><ul>
<li><a href="#grovy-templates"><span class="toc-section-number">5.1</span> Grovy templates</a><ul>
<li><a href="#my-groovy-template"><span class="toc-section-number">5.1.1</span> My groovy template</a></li>
</ul></li>
<li><a href="#python-jinja2-templates"><span class="toc-section-number">5.2</span> Python (Jinja2) templates</a></li>
<li><a href="#my-jinja2-template"><span class="toc-section-number">5.3</span> My Jinja2 template</a></li>
</ul></li>
<li><a href="#headers-and-footers"><span class="toc-section-number">6</span> Headers and footers</a><ul>
<li><a href="#headers-and-footers-as-templates"><span class="toc-section-number">6.1</span> Headers and footers as templates</a></li>
</ul></li>
<li><a href="#pdf-files"><span class="toc-section-number">7</span> PDF files</a></li>
<li><a href="#more-information"><span class="toc-section-number">8</span> More information</a></li>
</ul>
</div><!-- TOC -->
</div><!-- sidebar -->
<div id="content">
<h1 id="what-is-a-master-file"><span class="header-section-number">1</span> What is a master file?</h1>
<p>MkTechDocs uses the concept of a &quot;master document,&quot; which is nothing more than a normal markdown file that includes other markdown files. Here is this project's <code>master.md</code> file, for example:</p>
<div class="sourceCode"><pre class="sourceCode markdown"><code class="sourceCode markdown">```comment
Use a heading-level of zero here because we want all major sections in
the document to be level 1.
```
```{.include heading-level=0}
what-is-a-master.md
include-blocks.md
images.md
diagrams.md
templates.md
headers-and-footers.md
pdf-files.md
more-information.md
```
</code></pre></div>
<p>We'll get to <code>include</code> blocks next, but for now, just note that <code>master.md</code> serves as a mapping of which documents to include in your project and in which order.</p>
<h1 id="include-blocks"><span class="header-section-number">2</span> Include blocks</h1>
<p>You might be wondering if other markdown files can use <code>include</code> blocks. Yes! This is an important feature of MkTechDocs. MkTechDocs automatically figures out heading levels for an unlimited number of recursive includes.</p>
<p>It does this with a little clue from you. Here's what one looks like:</p>
<pre><code>```{.include heading-level=1}
    sub-directory/myincludedfile.md
```</code></pre>
<p><code>heading-level=1</code> tells MkTechDocs that at the point of the include, the current heading level is 1. When the file is included, MkTechDocs will automatically increase all the heading levels in the included document by 1 so that it fits nicely into the current document.</p>
<p>For the <code>heading-level</code> attribute to work correctly, all your project's sub documents should exist as standalone documents, starting with heading levels of 1.</p>
<pre><code># My sub document title

Some content

## A sub section

Some more content</code></pre>
<p>In this way, you can change the ordering in <code>master.md</code> and let MkTechDocs work out what the headings should be.</p>
<p>You've probably noticed that <code>master.md</code> uses <code>heading-level=0</code>. This means that MkTechDocs will include all the sub documents <em>as is</em>, with no changes to heading levels.</p>
<p>And here's what happens when you do the include above:</p>
<h2 id="this-heading-is-from-the-include-file"><span class="header-section-number">2.1</span> This heading is from the include file</h2>
<p>This content is from an included file.</p>
<h1 id="images"><span class="header-section-number">3</span> Images</h1>
<p>Working with images in a MkTechDocs project is easy. Here's an example.</p>
<pre><code>```
Please click to [the following link](images/smiley.png) to see a smiley.
    
Or let&#39;s include it inline with a title underneath:
 
![Smiley](images/smiley.png)
```</code></pre>
<p>And here's what the code above looks like after rendering:</p>
<hr />
<p>Please click <a href="images/smiley.png">the following link</a> to see a smiley.</p>
<p>Or let's include it inline with a title underneath:</p>
<div class="figure">
<img src="images/smiley.png" alt="Smiley" />
<p class="caption">Smiley</p>
</div>
<hr />
<p>MkTechDocs will know to copy your <code>images</code> directory to the output directory when you specify the path in the <code>mktechdocs.conf</code> file.</p>
<h1 id="diagrams"><span class="header-section-number">4</span> Diagrams</h1>
<p>MkTechDocs uses <code>graphviz</code> and <code>plantuml</code> to create and display messages. Here's a very simple example:</p>
<pre><code>```plantuml
A-&gt;B
```</code></pre>
<p>Here's what MkTechDocs produces:</p>
<p><img src="plantuml-c6117aebb4ce8e59ba2b46950eca869f.svg" /></p>
<p>Read more about PlantUML <a href="http://plantuml.com/">here</a>.</p>
<h1 id="templates"><span class="header-section-number">5</span> Templates</h1>
<p>MkTechDocs supports 2 templating languages, Python (jinja2) and Groovy. Groovy templates are easier to write and understand, but they significantly slow down large builds. Jinja2 is much faster. Here you'll see an example of both.</p>
<p>To use a template, you create a file with a special extension:</p>
<ul>
<li>Groovy: some-template-name-1.gt</li>
<li>Python: some-template-name-2.pyt</li>
</ul>
<p>MkTechDocs renders these templates before it does anything (well, <em>almost</em> anything), so you can refer to them in your include blocks with a <code>.md</code> extension because that's what MkTechDocs produces from them. Continuing from the example above, you could include those rendered templates in your project like this:</p>
<pre><code>```{.include heading-level=1}
some-template-name-1.md
some-template-name-2.md
````</code></pre>
<p>Let's start with a Groovy template.</p>
<h2 id="grovy-templates"><span class="header-section-number">5.1</span> Grovy templates</h2>
<p>Groovy is not the most popular language, so you might be wondering why MkTechDocs supports it. MkTechDocs was built in part to support a much larger project for AT&amp;T. One of the requirements was that the documentation system had to provide programmatic access to a large number of pre-existing java and Groovy libraries.</p>
<p>Here is a simple Groovy template, <code>my-groovy-template.gt</code>, included as a part of this project:</p>
<pre class="groovy"><code># My groovy template

This content is coming from a groovy template. Using templates, you can include logic in your documentation. Here is a silly counter to demonstrate the mechanics of using a groovy template:

&lt;%
(1..10).each {
	print &quot;$it &quot;
}
%&gt;

That&#39;s it!
</code></pre>
<p>And here it is, rendered:</p>
<h3 id="my-groovy-template"><span class="header-section-number">5.1.1</span> My groovy template</h3>
<p>This content is coming from a groovy template. Using templates, you can
include logic in your documentation. Here is a silly counter to
demonstrate the mechanics of using a groovy template:</p>
<p>1 2 3 4 5 6 7 8 9 10</p>
<p>That's it!</p>
<p>For more information about groovy and pandoc integration, <a href="https://github.com/jsseidel/groovy-pandoc">see this repository</a>.</p>
<h2 id="python-jinja2-templates"><span class="header-section-number">5.2</span> Python (Jinja2) templates</h2>
<p>Using python templates is a little different. For these, you need to create 2 files. First, you create a <code>*.pyt</code> file. Here's what a Jinja2 python file looks like:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># My Jinja2 template</span>

This <span class="kw">is</span> a Python Jinja2 template. It counts to <span class="dv">10</span>.

{<span class="op">%</span> <span class="cf">for</span> n <span class="kw">in</span> numbers <span class="op">%</span>}
{{n}}
{<span class="op">%</span> endfor <span class="op">%</span>}

That<span class="st">&#39;s it!</span></code></pre></div>
<p>Next, you need a <em>renderer</em> file. Renderers are used to pass variables to Jinja2, which uses this map to fill in values. Here's one for this example:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co">#!/usr/bin/env python</span>

<span class="im">import</span> os
<span class="im">import</span> sys
<span class="im">import</span> glob
<span class="im">from</span> mktechdocslib <span class="im">import</span> get_comment_from_pythondoc_desc, render_mktechdocs_jinja2_template

<span class="co">##</span>
<span class="co"># Create a simple renderer function that ouputs a template passed in on the</span>
<span class="co"># command line with the given variable dictionary.</span>
<span class="co">#</span>

<span class="kw">def</span> render():
    numbers <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>]<span class="op">;</span>
    varDictionary <span class="op">=</span> {<span class="st">&quot;numbers&quot;</span>:numbers}

    <span class="cf">if</span> <span class="kw">not</span> os.path.isfile(sys.argv[<span class="dv">1</span>]):
        sys.stderr.write(<span class="st">&quot;Cannot find &quot;</span> <span class="op">+</span> sys.argv[<span class="dv">1</span>] <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
        sys.exit(<span class="dv">1</span>)

    <span class="bu">print</span> render_mktechdocs_jinja2_template(sys.argv[<span class="dv">1</span>], varDictionary)

<span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:
    render()</code></pre></div>
<p>And here is how it renders:</p>
<h2 id="my-jinja2-template"><span class="header-section-number">5.3</span> My Jinja2 template</h2>
<p>This is a Python Jinja2 template. It counts to 10.</p>
<p>1 2 3 4 5 6 7 8 9 10</p>
<p>That's it!</p>
<h1 id="headers-and-footers"><span class="header-section-number">6</span> Headers and footers</h1>
<p>If you have some content you'd like to appear at the top or bottom of your project, you can do so by including:</p>
<ul>
<li>header.html: for header content</li>
<li>footer.html: for footer content</li>
</ul>
<p>The contents should be HTML (please no setup like <code>&lt;html&gt;</code> or <code>&lt;body&gt;</code>, just the bits and pieces of HTML you need).</p>
<h2 id="headers-and-footers-as-templates"><span class="header-section-number">6.1</span> Headers and footers as templates</h2>
<p>You can also use templates for rendering your header and footer. At this time, only Python Jinja2 templates are supported.</p>
<p>To create a footer template, for example, create a file called <code>footer.htmlt</code> (note the 't' on the end). Don't forget about the renderer. You'll also need one of those: <code>footer.renderer</code>.</p>
<p>Here is the content of this project's <code>footer.htmlt</code>:</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> align=</span><span class="st">center</span><span class="kw">&gt;&lt;p&gt;</span><span class="dv">&amp;copy;</span> {{year}} Spencer Seidel<span class="kw">&lt;/p&gt;&lt;/div&gt;</span></code></pre></div>
<p>And here is the content of this project's <code>footer.renderer</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co">#!/usr/bin/env python</span>

<span class="im">import</span> os
<span class="im">import</span> sys
<span class="im">import</span> glob
<span class="im">import</span> datetime
<span class="im">from</span> mktechdocslib <span class="im">import</span> get_comment_from_pythondoc_desc, render_mktechdocs_jinja2_template

<span class="co">##</span>
<span class="co"># Create a simple renderer function that ouputs a template passed in on the</span>
<span class="co"># command line with the given variable dictionary.</span>
<span class="co">#</span>

<span class="kw">def</span> render():
    now <span class="op">=</span> datetime.datetime.now()
    varDictionary <span class="op">=</span> {<span class="st">&quot;year&quot;</span>:now.year}

    <span class="cf">if</span> <span class="kw">not</span> os.path.isfile(sys.argv[<span class="dv">1</span>]):
        sys.stderr.write(<span class="st">&quot;Cannot find &quot;</span> <span class="op">+</span> sys.argv[<span class="dv">1</span>] <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
        sys.exit(<span class="dv">1</span>)

    <span class="bu">print</span> render_mktechdocs_jinja2_template(sys.argv[<span class="dv">1</span>], varDictionary)

<span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:
    render()</code></pre></div>
<h1 id="pdf-files"><span class="header-section-number">7</span> PDF files</h1>
<p>The docker version of MkTechDocs does <strong>NOT</strong> support PDF generation. This is simply because doing so would make the already-huge docker image twice as large.</p>
<p>The good news is that MkTechDocs has robust support for producing PDFs thanks to Pandoc and XeLaTeX. To produce PDFs, you need to install MkTechDocs locally. Follow <a href="https://att.github.io/MkTechDocs/#setting-up-your-environment">these instructions</a> carefully. If you need Groovy support, you'll additionally need to follow <a href="https://att.github.io/MkTechDocs/#installation-of-groovy-components">these instructions</a>.</p>
<p>You set some environment variables and then run an dependency-installation script appropriate for your architecture. Currently, there are scripts for Ubuntu (16.04 and 18.04), Arch Linux, Fedora, and macOS.</p>
<p>Warning: installation of the dependencies can trip up even seasoned techies, so you might want to take a look at what the script does before running it.</p>
<h1 id="more-information"><span class="header-section-number">8</span> More information</h1>
<p>For more information about using MkTechDocs, please see the <a href="https://att.github.io/MkTechDocs/">official documetation</a>.</p>
</div><!-- content -->
<div id="footer">
<div align=center><p>&copy; 2018 Spencer Seidel</p></div>

</div><!-- footer -->
</div><!-- wrapper -->
</body>
</html>
